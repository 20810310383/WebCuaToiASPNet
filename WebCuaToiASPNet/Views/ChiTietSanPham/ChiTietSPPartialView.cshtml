
@using WebCuaToiASPNet.Models;
@model IEnumerable<SanPham>


@foreach (var item in Model)
{
    <div class="col-lg-6 col-md-6">
        <div class="product_tab sidebar fix">

            <div class="tab-content produc_tab_c">
                <div class="tab-pane fade show active" id="p_tab1" role="tabpanel">
                    <div class="modal_img">
                        <a href="#"><img src="@item.Image1" alt=""></a>
                        @{
                            if (item.New_Hot == "New")
                            {
                                <div class="img_icone">
                                    <img src="~/Content/assets/img/cart/span-new.png" alt="">
                                </div>
                            }
                            else
                            {
                                <div class="hot_img">
                                    <img src="~/Content/assets/img/cart/span-hot.png" alt="">
                                </div>
                            }
                        }
                        <div class="view_img">
                            <a class="large_view" href="@item.Image1"><i class="fa fa-search-plus"></i></a>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="p_tab2" role="tabpanel">
                    <div class="modal_img">
                        <a href="#"><img src="@item.Image2" alt=""></a>
                        @{
                            if (item.New_Hot == "New")
                            {
                                <div class="img_icone">
                                    <img src="~/Content/assets/img/cart/span-new.png" alt="">
                                </div>
                            }
                            else
                            {
                                <div class="hot_img">
                                    <img src="~/Content/assets/img/cart/span-hot.png" alt="">
                                </div>
                            }
                        }
                        <div class="view_img">
                            <a class="large_view" href="@item.Image2"><i class="fa fa-search-plus"></i></a>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="p_tab3" role="tabpanel">
                    <div class="modal_img">
                        <a href="#"><img src="@item.Image3" alt=""></a>
                        @{
                            if (item.New_Hot == "New")
                            {
                                <div class="img_icone">
                                    <img src="~/Content/assets/img/cart/span-new.png" alt="">
                                </div>
                            }
                            else
                            {
                                <div class="hot_img">
                                    <img src="~/Content/assets/img/cart/span-hot.png" alt="">
                                </div>
                            }
                        }
                        <div class="view_img">
                            <a class="large_view" href="@item.Image3"> <i class="fa fa-search-plus"></i></a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="product_tab_button">
                <ul class="nav" role="tablist">
                    <li>
                        <a class="active" data-toggle="tab" href="#p_tab1" role="tab" aria-controls="p_tab1" aria-selected="false"><img src="@item.Image1" alt=""></a>
                    </li>
                    <li>
                        <a data-toggle="tab" href="#p_tab2" role="tab" aria-controls="p_tab2" aria-selected="false"><img src="@item.Image2" alt=""></a>
                    </li>
                    <li>
                        <a data-toggle="tab" href="#p_tab3" role="tab" aria-controls="p_tab3" aria-selected="false"><img src="@item.Image3" alt=""></a>
                    </li>
                </ul>
            </div>

        </div>
    </div>
    <div class="col-lg-6 col-md-6">
        <div class="product_d_right">
            <h1>@item.TenSP</h1>
            <div class="product_ratting mb-10">
                <ul>
                    <li><a href="#"><i class="fa fa-star"></i></a></li>
                    <li><a href="#"><i class="fa fa-star"></i></a></li>
                    <li><a href="#"><i class="fa fa-star"></i></a></li>
                    <li><a href="#"><i class="fa fa-star"></i></a></li>
                    <li><a href="#"><i class="fa fa-star"></i></a></li>
                    <li><a href="#"> Write a review </a></li>
                </ul>
            </div>
            <div class="product_desc">
                @*<p>@Html.Raw(item.Mota)</p>*@
            </div>

            @* <form action="#">*@
            <input type="hidden" name="id" value="@item.ID" />

            <div class="content_price mb-15">
                <span id="productPriceMoi">@item.GiaBan.Value.ToString("#,##") VNĐ</span>
                <span id="productPriceCu" class="old-price">@item.GiaCu.Value.ToString("#,##") VNĐ</span>

                @* <span>@item.GiaBan.Value.ToString("#,##") VNĐ</span>*@
                @*<span class="old-price">@item.GiaCu.Value.ToString("#,##") VNĐ</span>*@
            </div>
            <div class="box_quantity mb-20">

                <label>Số lượng</label>
                <input min="0" max="100" value="0" type="number" name="quantity" id="quantity">


                <a id="addToCartLink" data-product-id="@item.ID" href="@Url.Action("ThemGioHang", "GioHang", new { MaSP = item.ID })" title="thêm vào giỏ hàng">
                    <i class="fa fa-shopping-cart"></i>
                    <span>add to cart</span>
                </a>
                @*                <a  id="addToCartLink" href="@Url.Action("ThemGioHang", "GioHang", new { @MaSP = item.ID, @strUrl = Request.Url.ToString() })" title="thêm vào giỏ hàng"><i class="fa fa-shopping-cart"></i> <span>add to cart</span></a>
                *@                <a href="#" title="add to wishlist"><i class="fa fa-heart" aria-hidden="true"></i></a>
            </div>
            <div class="product_d_size mb-20">
                <label for="group_1">size</label>
                <select name="size" id="group_1" onchange="changePrice()">
                    <option value="50cm">50cm</option>
                    <option value="100cm">100cm</option>
                    <option value="150cm">150cm</option>
                </select>
            </div>
            <div class="sidebar_widget color">
                <h2>Choose Color</h2>
                <div class="widget_color">
                    @*<ul>
                    <li><a href="#"></a></li>
                    <li><a href="#"></a></li>
                    <li> <a href="#"></a></li>
                    <li><a href="#"></a></li>
                </ul>*@
                    <select name="color">
                        <option value="green">Xanh lá</option>
                        <option value="red">Đỏ</option>
                        <option value="black">Đen</option>
                        <option value="blue">Xanh dương</option>
                        <option value="yellow">Vàng</option>
                    </select>
                </div>
            </div>
            @*  </form>*@

            <script>
                // Lắng nghe sự kiện khi người dùng thay đổi size hoặc số lượng
                document.getElementById('group_1').addEventListener('change', updateAddToCartLink);
                document.getElementById('quantity').addEventListener('change', updateAddToCartLink);

                // Hàm cập nhật URL của liên kết "Thêm vào giỏ hàng" với size và số lượng mới
                function updateAddToCartLink() {
                    var selectedSize = document.getElementById('group_1').value;
                    var selectedQuantity = document.getElementById('quantity').value;

                    var addToCartLink = document.getElementById('addToCartLink');
                    var baseUrl = addToCartLink.href.split('?')[0]; // Lấy phần đầu của URL
                    var queryString = '?MaSP=' + addToCartLink.dataset.productId + '&size=' + selectedSize + '&quantity=' + selectedQuantity ;                    
                    addToCartLink.href = baseUrl + queryString; // Ghép lại URL hoàn chỉnh với tham số mới
                }
            </script>



            <script>
                // được gọi khi kích thước được chọn
                function changePrice() {

                    // Lấy giá trị của kích thước từ dropdown
                    var selectedSize = document.getElementById("group_1").value;

                    // Lấy giá trị giá bán hiện tại từ đoạn mã Razor
                    var giaban = parseInt("@item.GiaBan");
                    var giacu = parseInt("@item.GiaCu");

                    // Tính toán giá bán mới dựa trên kích thước được chọn
                    var newPriceMoi;
                    var newPriceCu;
                    switch (selectedSize) {
                        case "50cm": // 50cm
                            newPriceMoi = giaban * 1;
                            newPriceCu = giacu * 1;
                            break;
                        case "100cm": // 100cm
                            newPriceMoi = giaban * 1.5;
                            newPriceCu = giacu * 1.5;
                            break;
                        case "150cm": // 150cm
                            newPriceMoi = giaban * 1.95;
                            newPriceCu = giacu * 1.95;
                            break;
                        default:
                            newPriceMoi = giaban;
                            newPriceCu = giacu;
                    }

                    // Hiển thị giá bán mới lên giao diện
                    document.getElementById("productPriceMoi").innerHTML = newPriceMoi.toLocaleString() + " VNĐ";
                    document.getElementById("productPriceCu").innerHTML = newPriceCu.toLocaleString() + " VNĐ";

                    
                }
            </script>



            <div class="product_stock mb-20">
                <p></p>
                <span> Đã bán: @item.SoLuongBan </span>
            </div>
            <div class="wishlist-share">
                <h4>Share on:</h4>
                <ul>
                    <li><a href="#"><i class="fa fa-rss"></i></a></li>
                    <li><a href="#"><i class="fa fa-vimeo"></i></a></li>
                    <li><a href="#"><i class="fa fa-tumblr"></i></a></li>
                    <li><a href="#"><i class="fa fa-pinterest"></i></a></li>
                    <li><a href="#"><i class="fa fa-linkedin"></i></a></li>
                </ul>
            </div>

        </div>
    </div>

    <!--3 tab info-->
    <div class="product_d_info sidebar">
        <div class="col-12">
            <div class="product_d_inner">
                <div class="product_info_button">
                    <ul class="nav" role="tablist">
                        <li>
                            <a class="active" data-toggle="tab" href="#info" role="tab" aria-controls="info" aria-selected="false">Mô tả chi tiết</a>
                        </li>
                        <li>
                            <a data-toggle="tab" href="#sheet" role="tab" aria-controls="sheet" aria-selected="false">Data sheet</a>
                        </li>
                        <li>
                            <a data-toggle="tab" href="#reviews" role="tab" aria-controls="reviews" aria-selected="false">Reviews</a>
                        </li>
                    </ul>
                </div>
                <div class="tab-content">
                    <div class="tab-pane fade show active" id="info" role="tabpanel">
                        <div class="product_info_content">
                            <p>@Html.Raw(item.Mota)</p>
                        </div>
                    </div>

                    <div class="tab-pane fade" id="sheet" role="tabpanel">
                        <div class="product_d_table">
                            <form action="#">
                                <table>
                                    <tbody>
                                        <tr>
                                            <td class="first_child">Compositions</td>
                                            <td>Polyester</td>
                                        </tr>
                                        <tr>
                                            <td class="first_child">Styles</td>
                                            <td>Girly</td>
                                        </tr>
                                        <tr>
                                            <td class="first_child">Properties</td>
                                            <td>Short Dress</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </form>
                        </div>
                        <div class="product_info_content">
                            <p>Fashion has been creating well-designed collections since 2010. The brand offers feminine designs delivering stylish separates and statement dresses which have since evolved into a full ready-to-wear collection in which every item is a vital part of a woman's wardrobe. The result? Cool, easy, chic looks with youthful elegance and unmistakable signature style. All the beautiful pieces are made in Italy and manufactured with the greatest attention. Now Fashion extends to a range of accessories including shoes, hats, belts and more!</p>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="reviews" role="tabpanel">
                        <div class="product_info_content">
                            <p>Fashion has been creating well-designed collections since 2010. The brand offers feminine designs delivering stylish separates and statement dresses which have since evolved into a full ready-to-wear collection in which every item is a vital part of a woman's wardrobe. The result? Cool, easy, chic looks with youthful elegance and unmistakable signature style. All the beautiful pieces are made in Italy and manufactured with the greatest attention. Now Fashion extends to a range of accessories including shoes, hats, belts and more!</p>
                        </div>
                        <div class="product_info_inner">
                            <div class="product_ratting mb-10">
                                <ul>
                                    <li><a href="#"><i class="fa fa-star"></i></a></li>
                                    <li><a href="#"><i class="fa fa-star"></i></a></li>
                                    <li><a href="#"><i class="fa fa-star"></i></a></li>
                                    <li><a href="#"><i class="fa fa-star"></i></a></li>
                                    <li><a href="#"><i class="fa fa-star"></i></a></li>
                                </ul>
                                <strong>Posthemes</strong>
                                <p>09/07/2018</p>
                            </div>
                            <div class="product_demo">
                                <strong>demo</strong>
                                <p>That's OK!</p>
                            </div>
                        </div>
                        <div class="product_review_form">
                            <form action="#">
                                <h2>Add a review </h2>
                                <p>Your email address will not be published. Required fields are marked </p>
                                <div class="row">
                                    <div class="col-12">
                                        <label for="review_comment">Your review </label>
                                        <textarea name="comment" id="review_comment"></textarea>
                                    </div>
                                    <div class="col-lg-6 col-md-6">
                                        <label for="author">Name</label>
                                        <input id="author" type="text">

                                    </div>
                                    <div class="col-lg-6 col-md-6">
                                        <label for="email">Email </label>
                                        <input id="email" type="text">
                                    </div>
                                </div>
                                <button type="submit">Submit</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}


